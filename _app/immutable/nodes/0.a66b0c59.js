import{c as U,P as j,a as D,i as L}from"../chunks/navigation.fbb709d4.js";import{s as M,c as $,u as K,g as B,d as J,o as R}from"../chunks/scheduler.ae827b3c.js";import{S as I,i as z,d as H,t as X}from"../chunks/index.2fc609e0.js";new TextEncoder;const F=new TextDecoder,W=t=>{const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r},G=t=>{let e=t;e instanceof Uint8Array&&(e=F.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return W(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},Y=G;var Z=Object.create,C=Object.defineProperty,Q=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,V=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty,ee=(t,e)=>function(){return e||(0,t[O(t)[0]])((e={exports:{}}).exports,e),e.exports},te=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of O(e))!q.call(t,n)&&n!==r&&C(t,n,{get:()=>e[n],enumerable:!(o=Q(e,n))||o.enumerable});return t},E=(t,e,r)=>(r=t!=null?Z(V(t)):{},te(e||!t||!t.__esModule?C(r,"default",{value:t,enumerable:!0}):r,t)),A=ee({"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(t){t.parse=o,t.serialize=n;var e=Object.prototype.toString,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(i,d){if(typeof i!="string")throw new TypeError("argument str must be a string");for(var _={},a=d||{},y=a.decode||s,p=0;p<i.length;){var c=i.indexOf("=",p);if(c===-1)break;var h=i.indexOf(";",p);if(h===-1)h=i.length;else if(h<c){p=i.lastIndexOf(";",c-1)+1;continue}var v=i.slice(p,c).trim();if(_[v]===void 0){var g=i.slice(c+1,h).trim();g.charCodeAt(0)===34&&(g=g.slice(1,-1)),_[v]=u(g,y)}p=h+1}return _}function n(i,d,_){var a=_||{},y=a.encode||f;if(typeof y!="function")throw new TypeError("option encode is invalid");if(!r.test(i))throw new TypeError("argument name is invalid");var p=y(d);if(p&&!r.test(p))throw new TypeError("argument val is invalid");var c=i+"="+p;if(a.maxAge!=null){var h=a.maxAge-0;if(isNaN(h)||!isFinite(h))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(h)}if(a.domain){if(!r.test(a.domain))throw new TypeError("option domain is invalid");c+="; Domain="+a.domain}if(a.path){if(!r.test(a.path))throw new TypeError("option path is invalid");c+="; Path="+a.path}if(a.expires){var v=a.expires;if(!l(v)||isNaN(v.valueOf()))throw new TypeError("option expires is invalid");c+="; Expires="+v.toUTCString()}if(a.httpOnly&&(c+="; HttpOnly"),a.secure&&(c+="; Secure"),a.priority){var g=typeof a.priority=="string"?a.priority.toLowerCase():a.priority;switch(g){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(a.sameSite){var T=typeof a.sameSite=="string"?a.sameSite.toLowerCase():a.sameSite;switch(T){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c}function s(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function f(i){return encodeURIComponent(i)}function l(i){return e.call(i)==="[object Date]"||i instanceof Date}function u(i,d){try{return d(i)}catch{return i}}}}),k=E(A()),P=E(A());function w(t){if(!t)return null;try{const e=JSON.parse(t);if(!e)return null;if(e.constructor.name==="Object")return e;if(e.constructor.name!=="Array")throw new Error(`Unexpected format: ${e.constructor.name}`);const[r,o,n]=e[0].split("."),s=Y(o),f=new TextDecoder,{exp:l,sub:u,...i}=JSON.parse(f.decode(s));return{expires_at:l,expires_in:l-Math.round(Date.now()/1e3),token_type:"bearer",access_token:e[0],refresh_token:e[1],provider_token:e[2],provider_refresh_token:e[3],user:{id:u,factors:e[4],...i}}}catch(e){return console.warn("Failed to parse cookie string:",e),null}}function re(t){var e;return JSON.stringify([t.access_token,t.refresh_token,t.provider_token,t.provider_refresh_token,((e=t.user)==null?void 0:e.factors)??null])}function m(){return typeof window<"u"&&typeof window.document<"u"}var b={path:"/",sameSite:"lax",maxAge:60*60*24*365*1e3};function x(t){return new RegExp(".{1,"+t+"}","g")}var N=3180,oe=x(N);function ne(t,e,r){const o=r!==void 0?x(r):oe;if(Math.ceil(e.length/(r??N))===1)return[{name:t,value:e}];const s=[],f=e.match(o);return f==null||f.forEach((l,u)=>{const i=`${t}.${u}`;s.push({name:i,value:l})}),s}function ie(t,e=()=>null){let r=[];for(let o=0;;o++){const n=`${t}.${o}`,s=e(n);if(!s)break;r.push(s)}return r.length?r.join(""):null}var ae=class{constructor(t){this.cookieOptions={...b,...t,maxAge:b.maxAge}}getItem(t){const e=this.getCookie(t);if(t.endsWith("-code-verifier")&&e)return e;if(e)return JSON.stringify(w(e));const r=ie(t,o=>this.getCookie(o));return r!==null?JSON.stringify(w(r)):null}setItem(t,e){if(t.endsWith("-code-verifier")){this.setCookie(t,e);return}let r=JSON.parse(e);const o=re(r);ne(t,o).forEach(s=>{this.setCookie(s.name,s.value)})}removeItem(t){this._deleteSingleCookie(t),this._deleteChunkedCookies(t)}_deleteSingleCookie(t){this.getCookie(t)&&this.deleteCookie(t)}_deleteChunkedCookies(t,e=0){for(let r=e;;r++){const o=`${t}.${r}`;if(this.getCookie(o)===void 0)break;this.deleteCookie(o)}}},se=class extends ae{constructor(t){super(t)}getCookie(t){return m()?(0,k.parse)(document.cookie)[t]:null}setCookie(t,e){if(!m())return null;document.cookie=(0,k.serialize)(t,e,{...this.cookieOptions,httpOnly:!1})}deleteCookie(t){if(!m())return null;document.cookie=(0,k.serialize)(t,"",{...this.cookieOptions,maxAge:0,httpOnly:!1})}};function ce(t,e,r){var o;const n=m();return U(t,e,{...r,auth:{flowType:"pkce",autoRefreshToken:n,detectSessionInUrl:n,persistSession:!0,storage:r.auth.storage,...(o=r.auth)!=null&&o.storageKey?{storageKey:r.auth.storageKey}:{}}})}P.parse;P.serialize;/*! Bundled license information:

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/var ue=class extends se{constructor(t=null,e){super(e),this.serverSession=t}getItem(t){return m()?super.getItem(t):JSON.stringify(this.serverSession)}},S;function le({supabaseUrl:t,supabaseKey:e,event:r,serverSession:o,options:n,cookieOptions:s}){var f;const l=m();if(l&&S)return S;const u=ce(t,e,{...n,global:{fetch:r.fetch,...n==null?void 0:n.global,headers:{...(f=n==null?void 0:n.global)==null?void 0:f.headers,"X-Client-Info":"@supabase/auth-helpers-sveltekit@0.10.7"}},auth:{storage:new ue(o,s)}});return l&&(S=u),u}const fe=!0,pe=async({fetch:t,data:e,depends:r})=>{r("supabase:auth");const o=le({supabaseUrl:j,supabaseKey:D,event:{fetch:t},serverSession:e.session}),{data:{session:n}}=await o.auth.getSession();return{supabase:o,session:n}},me=Object.freeze(Object.defineProperty({__proto__:null,load:pe,prerender:fe},Symbol.toStringTag,{value:"Module"}));function de(t){let e;const r=t[2].default,o=$(r,t,t[1],null);return{c(){o&&o.c()},l(n){o&&o.l(n)},m(n,s){o&&o.m(n,s),e=!0},p(n,[s]){o&&o.p&&(!e||s&2)&&K(o,r,n,n[1],e?J(r,n[1],s,null):B(n[1]),null)},i(n){e||(H(o,n),e=!0)},o(n){X(o,n),e=!1},d(n){o&&o.d(n)}}}function he(t,e,r){let o,n,{$$slots:s={},$$scope:f}=e,{data:l}=e;return R(()=>{const{data:{subscription:u}}=o.auth.onAuthStateChange((i,d)=>{(d==null?void 0:d.expires_at)!==(n==null?void 0:n.expires_at)&&L("supabase:auth")});return()=>u.unsubscribe()}),t.$$set=u=>{"data"in u&&r(0,l=u.data),"$$scope"in u&&r(1,f=u.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&({supabase:o,session:n}=l)},[l,f,s]}class ye extends I{constructor(e){super(),z(this,e,he,de,M,{data:0})}}export{ye as component,me as universal};
